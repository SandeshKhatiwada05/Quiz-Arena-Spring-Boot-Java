<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Quiz Arena - Start</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg,#26c6da 0%,#2979ff 100%);
            --glass: rgba(23, 32, 57, 0.85);
            --glass-border: rgba(255,255,255,0.15);
            --accent: #ffd166;
            --accent-2: #66f6c3;
            --highlight: #3fcde7;
            --danger: #ff6b6b;
            --muted: #a5b0ca;
            --heading: #fdfeff;
            --text: #eaf0fa;
            --shadow-lg: 0 8px 30px rgba(32,40,102,0.22);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html,body { height:100%; background: var(--primary-gradient); }
        body {
            min-height: 100vh;
            font-family: 'Poppins', Arial, sans-serif;
            color: var(--text);
            display: flex;
            align-items: center;
            justify-content: center;
            background-attachment: fixed;
            background-repeat: no-repeat;
            animation: gradientMove 30s ease-in-out infinite;
        }
        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        body::before {
            /* animated particles - subtle fade, no emoji stars */
            content: "";
            pointer-events: none;
            position: fixed;
            z-index: 0;
            top:0;left:0;right:0;bottom:0;
            background:
                    radial-gradient(circle at 20% 90%, #52eaf922 2px, transparent 80px),
                    radial-gradient(circle at 60% 80%, #ffd16622 1.3px, transparent 110px),
                    radial-gradient(circle at 85% 11%, #ffffff11 1.5px, transparent 110px);
            mix-blend-mode: lighten;
            animation: sparkle 14s linear infinite alternate;
        }
        @keyframes sparkle {
            50% { background-position: 60px 60px, -50px 100px, 100px -40px;}
        }

        .wrap {
            width: 100%;
            max-width: 650px;
            z-index: 1;
            display: flex;
            flex-direction: column;
            align-items: stretch;
            gap: 38px;
        }

        .hero {
            background: var(--glass);
            border-radius: 30px;
            padding: 42px 38px 38px 38px;
            box-shadow: var(--shadow-lg),0 2px 16px 1px #003f7c28;
            border: 2px solid var(--glass-border);
            display: flex;
            gap: 34px;
            align-items: center;
            position: relative;
            overflow: hidden;
            isolation: isolate;
        }
        .hero::after {
            /* Subtle glass overlay highlight curve */
            content: "";
            position: absolute;
            top: -90px; right:-110px;
            width: 220px; height: 340px;
            background: radial-gradient(circle at 60% 48%, var(--accent-2) 40%, transparent 86%);
            opacity: 0.24;
            z-index: -1;
            filter: blur(5px);
            animation: glasslight 11s linear infinite alternate;
        }
        @keyframes glasslight {
            0% { top: -90px; right: -110px;}
            100% { top: -70px; right: -70px;}
        }
        .left {
            flex: 1 1 0;
            min-width: 180px;
            display: flex;
            flex-direction: column;
        }
        .logo {
            font-weight:700;
            font-size: 24px;
            letter-spacing: 1.3px;
            color: var(--accent-2);
            margin-bottom: 10px;
            line-height:1;
            /* underline accent bar */
            position:relative;
        }
        .logo::after {
            content: "";
            display: block;
            margin-top: 7px;
            width: 32px;
            height: 4px;
            border-radius:2px;
            background: linear-gradient(90deg,var(--accent-2),var(--accent) 80%);
        }
        h1 {
            color: var(--heading);
            font-size: 27px;
            margin-top: 18px;
            margin-bottom: 7px;
            font-weight:700;
            text-shadow: 0 3px 22px #41a8c910;
        }
        .lead {
            margin-top: 12px;
            color: var(--muted);
            font-size: 16px;
            line-height: 1.73;
            opacity: .98;
        }
        .lead span {
            color: var(--accent-2);
            font-weight: 600;
        }

        .form-card {
            background: rgba(34, 51, 74, 0.93);
            border-radius: 18px;
            padding: 30px 26px 22px 26px;
            width: 380px;
            box-shadow: 0 3px 22px rgba(30,39,84,0.13);
            border: 1.5px solid var(--glass-border);
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            gap: 16px;
            /* Soft entrance animation */
            animation: fadeIn 1.4s cubic-bezier(.32,.93,.38,1.08) .2s both;
        }
        @keyframes fadeIn {
            from { opacity:.0; transform:translateY(40px) scale(0.98);}
            to { opacity:1; transform:none;}
        }
        label {
            display: block;
            font-size: 13px;
            color: var(--muted);
            font-weight: 600;
            margin-bottom: 6px;
            letter-spacing: 0.21px;
        }
        input[type="text"], input[type="number"], select {
            width: 100%;
            padding: 14px 13px;
            border-radius: 11px;
            border: 1.5px solid rgba(255,255,255,0.09);
            background: rgba(26,32,60,0.49);
            color: var(--heading);
            font-size: 16px;
            margin-bottom: 4px;
            transition: border .16s, box-shadow .17s, background .13s;
            outline: none;
            font-family: inherit;
        }
        input:focus, select:focus {
            border: 1.9px solid var(--accent-2);
            background: rgba(80,205,255,0.08);
            box-shadow: 0 2px 10px #33ebcc25;
        }
        .row { display: flex; gap: 14px; }
        .row .col { flex: 1 1 0; }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 15px 13px;
            border-radius: 11px;
            font-size: 17px;
            background: linear-gradient(92deg, var(--accent-2) 6%, #17f9e6 60%, var(--accent) 99%);
            color: #183f41;
            font-weight: 700;
            border: none;
            cursor: pointer;
            box-shadow: 0 2px 17px #00e1ff1a;
            letter-spacing: .12px;
            margin-top: 7px;
            overflow: hidden;
            position:relative;
            transition: background 0.16s, transform .11s, box-shadow .13s;
        }
        .btn::after {
            /* animated highlight slide */
            content:"";
            position:absolute; left:-40%; top:0;
            width: 40%; height:100%;
            background: linear-gradient(95deg,rgba(255,255,255,.11),rgba(255,255,255,0) 100%);
            transform: skewX(-18deg);
            transition: left .4s;
        }
        .btn:hover::after { left:110%; }
        .btn:active { transform:translateY(1.2px) scale(0.97);}
        .btn[disabled] { opacity:.63; cursor:not-allowed; }

        .small {
            font-size: 13px;
            color: var(--muted);
            margin-top: 13px;
            text-align: center;
            opacity: 0.94;
        }
        .error {
            color: var(--danger);
            font-size: 14px;
            margin-top: 10px;
            text-align:center;
            border-radius: 6px;
            background: rgba(108, 16, 23, 0.10);
            padding: 8px 0 7px 0;
            letter-spacing: .10px;
        }

        @media (max-width: 800px) {
            .wrap { max-width: 99vw; }
            .hero { flex-direction: column; align-items: stretch; padding: 22px 7vw 18px 7vw; }
            .form-card { width: 96vw; max-width: 420px; }
        }
        @media (max-width: 480px) {
            .hero { padding:12px 2vw 10px 2vw; gap:13px; }
            .form-card { padding: 9px 6px 10px 6px; }
            h1 { font-size: 18.5px;}
            .logo { font-size:18px;}
        }

    </style>
</head>
<body>
<div class="wrap">
    <div class="hero">
        <div class="left">
            <div class="logo">QUIZ ARENA</div>
            <h1>Ready to Battle Your Knowledge?</h1>
            <p class="lead">
                Welcome to the brightest quiz arena.<br>
                <span>No accounts. No fuss. Pure, fair, beautiful quiz play.</span>
            </p>
        </div>
        <form id="quizForm" class="form-card" autocomplete="off" onsubmit="event.preventDefault(); startQuiz();">
            <label for="fullName">Full Name</label>
            <input id="fullName" type="text" placeholder="Enter your full name" autocomplete="name" required spellcheck="false">

            <div class="row">
                <div class="col">
                    <label for="age">Age</label>
                    <input id="age" type="number" placeholder="e.g. 18" min="5" required>
                </div>
                <div class="col">
                    <label for="questionAmount">Number of Questions</label>
                    <input id="questionAmount" type="number" placeholder="5" min="1" max="50" required>
                </div>
            </div>

            <label for="questionType">Question Type</label>
            <select id="questionType">
                <option value="multiple">Multiple Choice</option>
                <option value="boolean">True / False</option>
            </select>

            <button class="btn" type="submit" id="startBtn">
                <span>Start Quiz</span>
                <svg width="28" height="17" viewBox="0 0 28 17" fill="none" xmlns="http://www.w3.org/2000/svg" style="display:inline;vertical-align:-5px;">
                    <path d="M1 8.5H27M27 8.5L19.5 1M27 8.5L19.5 16" stroke="#1abccf" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>

            <div id="formError" class="error" style="display:none"></div>
            <div class="small">By starting, you agree to fair play. Play like a champ.</div>
        </form>
    </div>
</div>

<script>
    function validateInputs(fullName, age, amount) {
        if (!fullName || fullName.trim().length < 2) return "Please enter a valid name.";
        const a = Number(age);
        if (!a || a < 5) return "Age must be 5 or older.";
        const q = Number(amount);
        if (!q || q < 1 || q > 50) return "Questions must be between 1 and 50.";
        return null;
    }

    function startQuiz() {
        const fullName = document.getElementById("fullName").value.trim();
        const age = document.getElementById("age").value;
        const questionAmount = document.getElementById("questionAmount").value;
        const questionType = document.getElementById("questionType").value;
        const formError = document.getElementById("formError");
        formError.style.display = "none";

        const err = validateInputs(fullName, age, questionAmount);
        if (err) {
            formError.innerText = err;
            formError.style.display = "block";
            return;
        }

        const player = { fullName, age: Number(age), questionAmount: Number(questionAmount), questionType };
        localStorage.setItem("quizPlayer", JSON.stringify(player));

        const startBtn = document.getElementById("startBtn");
        startBtn.disabled = true;
        startBtn.querySelector('span').textContent = "Loading...";

        fetch("/api/start", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(player)
        })
            .then(response => {
                if (!response.ok) throw new Error("Failed to fetch quiz data");
                return response.json();
            })
            .then(data => {
                localStorage.setItem("quizData", JSON.stringify(data));
                window.location.href = "quiz.html";
            })
            .catch(error => {
                startBtn.disabled = false;
                startBtn.querySelector('span').textContent = "Start Quiz";
                formError.innerText = "Error: " + error.message;
                formError.style.display = "block";
            });
    }
</script>
</body>
</html>